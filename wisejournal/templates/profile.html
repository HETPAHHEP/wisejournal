{% extends 'base.html' %}
{% block title %}Профиль {{ author.get_full_name }}{% endblock %}
{% block content %}

    <!-- Информация об авторе -->
    <div class="col-md-3 mb-3 mt-1">
        <div class="card">
            <div class="card-body">
                <div class="h2">
                    {{ author.get_full_name }}
                </div>
                <div class="h3 text-muted">
                    @{{ author.get_username }}
                </div>
            </div>

            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <div class="h6 text-muted">
                        Подписчиков: XXX <br />
                        Подписан: XXX
                    </div>
                </li>
                <li class="list-group-item">
                    <div class="h6 text-muted">
                        {% block posts_count %}
                        Записей: {{ paginator.count }}
                        {% endblock %}
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Посты автора -->
    <div class="col-md-9">

        {% block post_view %}

        {% for post in page %}

            <div class="card mb-3 mt-1 shadow-sm">
                <div class="card-body">

                    <p class="card-text">
                        <a href="/{{ author.get_username }}">
                            <strong class="d-block text-muted">@{{ author.get_username }}</strong>
                        </a>
                        {{ post.text }}
                    </p>

                    <div class="d-flex justify-content-between align-items-center">

                        <div class="btn-group ">
                            {% if user.is_authenticated %}

                            <a class="btn btn-sm text-muted"
                               href="/{{ author.get_username }}/{{ post.id }}"
                               role="button">Добавить комментарий</a>

                            {% endif %}

                            {% if user.is_authenticated and user == author %}

                            <a class="btn btn-sm text-muted"
                               href="{% url 'post_edit' username=author.get_username post_id=post.id %}"
                               role="button">Редактировать</a>

                            {% endif %}

                        </div>
                        <small class="text-muted">{{ post.pub_date }}</small>
                    </div>
                </div>
            </div>

        {% endfor %}

    </div>

{% if page.has_other_pages %}
    {% include 'paginator.html' with items=page paginator=paginator %}
{% endif %}
{% endblock %}
{% endblock %}
